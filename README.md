## Documentation

We use [Jekyll](https://jekyllrb.com/docs/) as a static generator with GitHub Pages. It allows to test changes to your site locally and easily deploy the site using GitHub. 

_See more information about [Jekyll and GitHub Pages](https://help.github.com/articles/about-github-pages-and-jekyll/)._


## Structure of `gh-pages`

*   `/_build` - contains script to build website locally.
*   `/_includes` - documentation in html format which could be added in markdown file as `{% include filename.html %}`.
*   `/_layouts` - contains templates that wrap posts.
*   `/images` - contains images used in the website.
*   `/userguide` - documentation in markdown format.
*   `_config.yml` - contains configuration settings for Jekyll.
*   `Gemfile` - describes Gem dependencies for Ruby programs.
*   `styles.css` - all styles for the website.

Generated files:
*   `/apiguide` - contains generated folders with API documentation, the name of the folder - version of Infer.NET.

## How to contribute

To create a new version of the API documentation see [Build API documentation](#build-api-documentation).

To add a new page to the existing documentation see [Add files to documentation](#add-files-to-documentation).

To test the website locally see [Run website locally](#run-website-locally).


## Build API documentation

The API documentation is generated by using DocFX.
The last version of the API documentation is in the `apiguide/` folder. If you want to create a new version of the API documentation:

1. Switch to the master branch.
2. Commit your changes before start the build process.
3. Go to the `docs/_build` folder.
4. Run the powershell script `makeApiDocs.ps1`. `makeApiDocs.ps1` script should create the folder `apiguide-tmp/` with the API documentation, switch to gh-pages, commit and push the new changes. 

## Add files to the documentation

You can easily add a new .md page to the existing documentation. The website supports [GitHub Flavored Markdown](https://github.github.com/gfm/).
To make a link to your page use Jekyll syntax `[newMdFile](newMdFile.md)`. You should provide a relative link for your page.

If you want to add your .md page to the existing website layout, write on the top of the .md file:
```
---
layout: default
---
```

If you want to use another layout, you should add it in the `_layouts/` and then set this layout in .md file. The tag `{{ content }}` is used to inject the content into the web page.

_See more information about using [layouts](https://jekyllrb.com/docs/layouts/)._

You can use variables inside layouts (for example `site.baseurl`). _See more information about using [variables](https://jekyllrb.com/docs/variables/)._

## Run website locally

Documentation website is generated using Jekyll static site generator.
Jekyll creates `_site` folder which contains all generated files for documentation website.

To build and test site locally run the powershell script `_build/preview.ps1` or just run the command `bundle exec jekyll serve --baseurl=''` from the command line tool.

After that you can change the pages and Jekyll will rebuild any time you make a change.

#### Requirements

1. [Ruby](https://www.ruby-lang.org/en/downloads/) version 2.2.5 or above
2. [RubyGems](https://rubygems.org/pages/download)
3. [Jekyll](https://jekyllrb.com/docs/)
